"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[939],{6463(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"part2/chapter-7-building-packages","title":"Building ROS 2 Packages with Python","description":"In Chapter 6, we looked at individual nodes and communication patterns. Now, we\'ll learn how to organize that code into Packages, which are the standard unit of software distribution in ROS 2.","source":"@site/docs/part2/chapter-7-building-packages.md","sourceDirName":"part2","slug":"/part2/chapter-7-building-packages","permalink":"/docs/part2/chapter-7-building-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/part2/chapter-7-building-packages.md","tags":[],"version":"current","frontMatter":{"title":"Building ROS 2 Packages with Python","sidebar_label":"Chapter 7: Building ROS 2 Packages with Python"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 6: Nodes, Topics, Services, and Actions","permalink":"/docs/part2/chapter-6-nodes-topics-services-actions"},"next":{"title":"Chapter 8: Launch Files and Parameter Management","permalink":"/docs/part2/chapter_8"}}');var r=i(4848),a=i(8453);const c={title:"Building ROS 2 Packages with Python",sidebar_label:"Chapter 7: Building ROS 2 Packages with Python"},t="Chapter 7: Building ROS 2 Packages with Python",o={},d=[{value:"1. The ROS 2 Workspace",id:"1-the-ros-2-workspace",level:2},{value:"Best Practice",id:"best-practice",level:3},{value:"2. Creating a Python Package",id:"2-creating-a-python-package",level:2},{value:"Key Files Created",id:"key-files-created",level:3},{value:"3. Managing Dependencies",id:"3-managing-dependencies",level:2},{value:"4. Defining Entry Points",id:"4-defining-entry-points",level:2},{value:"5. Building and Running",id:"5-building-and-running",level:2},{value:"Sourcing",id:"sourcing",level:3},{value:"Running",id:"running",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-7-building-ros-2-packages-with-python",children:"Chapter 7: Building ROS 2 Packages with Python"})}),"\n",(0,r.jsxs)(n.p,{children:["In Chapter 6, we looked at individual nodes and communication patterns. Now, we'll learn how to organize that code into ",(0,r.jsx)(n.strong,{children:"Packages"}),", which are the standard unit of software distribution in ROS 2."]}),"\n",(0,r.jsx)(n.h2,{id:"1-the-ros-2-workspace",children:"1. The ROS 2 Workspace"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Workspace"})," is a directory where you develop your ROS 2 code. It typically has a specific structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"~/ros2_ws/\r\n\u2514\u2500\u2500 src/  <-- Your source code goes here\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When you build the workspace, ",(0,r.jsx)(n.code,{children:"colcon"})," (the ROS 2 build tool) creates three other directories:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build/"}),": Intermediate build files."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"install/"}),": Where your package is installed to be used."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"log/"}),": Logs from the build process."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"best-practice",children:"Best Practice"}),"\n",(0,r.jsxs)(n.p,{children:["Always run build commands from the root of your workspace (",(0,r.jsx)(n.code,{children:"~/ros2_ws"}),"), not from inside the package directories."]}),"\n",(0,r.jsx)(n.h2,{id:"2-creating-a-python-package",children:"2. Creating a Python Package"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ros2"})," command line tool makes creating a package easy."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python <package_name> --dependencies rclpy std_msgs\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--build-type ament_python"}),": Tells ROS 2 this is a Python package."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--dependencies"}),": Adds dependencies to your ",(0,r.jsx)(n.code,{children:"package.xml"})," immediately."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"key-files-created",children:"Key Files Created"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"package.xml"}),": Meta-information about your package (version, maintainer, dependencies)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.py"}),": Installation instructions for Python."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.cfg"}),": Configuration for ",(0,r.jsx)(n.code,{children:"setup.py"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resource/<package_name>"}),": Marker file for ROS 2 to find your package."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"3-managing-dependencies",children:"3. Managing Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"package.xml"})," file defines what your package needs to run. For a Python package, you typically see:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<exec_depend>rclpy</exec_depend>\r\n<exec_depend>std_msgs</exec_depend>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you import a new message type or library, you MUST add it here. This ensures that when you share your code, others can install the necessary dependencies easily using ",(0,r.jsx)(n.code,{children:"rosdep"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"4-defining-entry-points",children:"4. Defining Entry Points"}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"setup.py"}),", the ",(0,r.jsx)(n.code,{children:"entry_points"})," dictionary maps a command-line executable name to a specific Python function in your code."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\r\n    'console_scripts': [\r\n        'my_node = my_package.my_node:main',\r\n        'talker = my_package.publisher:main',\r\n        'listener = my_package.subscriber:main',\r\n    ],\r\n},\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Left side"})," (",(0,r.jsx)(n.code,{children:"'talker'"}),"): The name of the executable (what you type after ",(0,r.jsx)(n.code,{children:"ros2 run my_package ..."}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Right side"})," (",(0,r.jsx)(n.code,{children:"'my_package.publisher:main'"}),"): The path to the function to run (",(0,r.jsx)(n.code,{children:"<package>.<module>:<function>"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": If you forget this step, ",(0,r.jsx)(n.code,{children:"colcon build"})," might succeed, but ",(0,r.jsx)(n.code,{children:"ros2 run"})," won't find your node!"]}),"\n",(0,r.jsx)(n.h2,{id:"5-building-and-running",children:"5. Building and Running"}),"\n",(0,r.jsx)(n.p,{children:"Once your code is written and configured, go back to the workspace root to build."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --symlink-install\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--symlink-install"}),": Creates links to your Python files instead of copying them. This allows you to edit your Python code and run it immediately without re-building every time (useful for development)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sourcing",children:"Sourcing"}),"\n",(0,r.jsxs)(n.p,{children:["After building, you must source the ",(0,r.jsx)(n.strong,{children:"overlay"})," to add your new package to the environment."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"running",children:"Running"}),"\n",(0,r.jsx)(n.p,{children:"Now you can run your nodes like any other ROS 2 executable:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run <package_name> <executable_name>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For example, if you defined an entry point named ",(0,r.jsx)(n.code,{children:"talker"})," in package ",(0,r.jsx)(n.code,{children:"my_first_package"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_first_package talker\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>c,x:()=>t});var s=i(6540);const r={},a=s.createContext(r);function c(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);