"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[622],{8967(e,o,t){t.r(o),t.d(o,{default:()=>d});var l=t(6540),n=t(4148),r=t(6347),i=t(1409),s=t(54),a=t(4848);function d(){const[e,o]=(0,l.useState)("Beginner"),[t,d]=(0,l.useState)("Frontend Developer"),[c,u]=(0,l.useState)(!1),[b,h]=(0,l.useState)(!1),p=(0,r.W6)(),{refreshProfile:m,profile:f,session:g}=(0,s.A)();l.useEffect(()=>{g&&f?.is_onboarded&&p.push("/dashboard")},[f,g,p]);return(0,a.jsx)(n.A,{title:"Onboarding",children:(0,a.jsxs)("div",{className:"container margin-vert--lg",style:{maxWidth:"500px"},children:[(0,a.jsxs)("div",{className:"text--center margin-bottom--lg",children:[(0,a.jsx)("h1",{children:"Complete Your Profile"}),(0,a.jsx)("p",{children:"Tell us about yourself to personalize your AI interactions."})]}),(0,a.jsxs)("form",{onSubmit:async o=>{o.preventDefault(),u(!0);try{const o=new AbortController,l=setTimeout(()=>o.abort(),8e3),n=await fetch("http://localhost:8001/api/profile/onboarding",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({python_proficiency:e,developer_role:t}),credentials:"include",signal:o.signal});if(clearTimeout(l),n.ok)h(!0),i.oR.success("Profile Personalized Successfully!"),await m(),setTimeout(()=>p.push("/dashboard"),1500);else if(403===n.status){const e=await n.json().catch(()=>({}));"Profile already completed"===e.detail?(h(!0),i.oR.info("Profile Already Personalized!"),await m(),setTimeout(()=>p.push("/dashboard"),1500)):i.oR.error("Error: "+(e.detail||"Forbidden"))}else{const e=await n.json().catch(()=>({detail:n.statusText}));i.oR.error("Error: "+(e.detail||"Failed to save profile"))}}catch(o){"AbortError"===o.name?i.oR.error("Request timed out. Backend might be slow or down."):i.oR.error("Network error. Make sure backend is running on port 8001.")}finally{u(!1)}},children:[(0,a.jsxs)("div",{className:"margin-bottom--md",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Python Proficiency"}),(0,a.jsxs)("select",{className:"button button--block button--outline button--secondary",style:{cursor:"pointer",textAlign:"left"},value:e,onChange:e=>o(e.target.value),disabled:b||c,children:[(0,a.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,a.jsxs)("div",{className:"margin-bottom--lg",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Developer Role"}),(0,a.jsxs)("select",{className:"button button--block button--outline button--secondary",style:{cursor:"pointer",textAlign:"left"},value:t,onChange:e=>d(e.target.value),disabled:b||c,children:[(0,a.jsx)("option",{value:"Frontend Developer",children:"Frontend Developer"}),(0,a.jsx)("option",{value:"Backend Developer",children:"Backend Developer"}),(0,a.jsx)("option",{value:"Full Stack Developer",children:"Full Stack Developer"}),(0,a.jsx)("option",{value:"None",children:"None"})]})]}),(0,a.jsx)("button",{className:"button button--block "+(b?"button--success":"button--primary"),disabled:c||b,style:{fontSize:"1.1rem",padding:"12px"},children:b?"Profile Successfully Personalized!":c?"Saving Profile...":"Complete Profile"})]})]})})}}}]);